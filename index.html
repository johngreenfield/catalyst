<!doctype html>
<html lang="en" data-bs-theme="light">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Catalyst - Your Executive Function Assistant</title>
        
        <!-- Optional tags and SEO -->
        <meta name="author" content="John Greenfield">
        <meta name="description" content="Your AI-powered executive function assistant. Simplify complex tasks, organize thoughts, understand tone & enhance productivity for neurodivergent minds.">
        <meta name="keywords" content="neurodivergent support, executive function, ADHD tools, autism assistant, task management, AI assistant, Gemini app, productivity app, task breakdown, text simplification, tone analysis, organization tools, assistive technology, web app, cognitive aid">
        <meta name="robots" content="index,follow">
        <meta name="language" content="en-gb">
        <meta name="rating" content="general">
        <meta name="format-detection" content="telephone=yes">
        <meta name="HandheldFriendly" content="true">
        <meta name="theme-color" content="#2b3035">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="Catalyst">
        <meta name="msapplication-navbutton-color" content="#2b3035">
        <meta name="msapplication-starturl" content="/">

        <!-- Open Graph / Facebook -->
        <meta property="og:title" content="Catalyst - Your Executive Function Assistant">
        <meta property="og:type" content="website">

        <!-- Icons, Stylesheets, Libraries and JS -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    </head>

    <body class="d-flex flex-column">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="assets/img/icon.png" width="30" height="30" class="d-inline-block align-top" alt="">
                    Catalyst
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="toggler-icon top-bar"></span>
                    <span class="toggler-icon middle-bar"></span>
                    <span class="toggler-icon bottom-bar"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav"> 
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Contact</a>
                        </li>
                    </ul>
                    <hr class="d-lg-none my-2">
                    <div class="d-flex flex-row justify-content-around justify-content-lg-end align-items-center w-100 w-lg-auto mt-lg-0">
                        <button type="button" class="btn nav-link me-lg-2" id="settings-button" aria-label="Settings" data-bs-toggle="modal" data-bs-target="#settingsModal">
                            <i class="bi bi-gear fs-5" aria-hidden="true"></i>
                        </button>
                        <button type="button" class="btn nav-link me-lg-3" id="help-button" aria-label="Help" data-bs-toggle="modal" data-bs-target="#helpModal">
                            <i class="bi bi-question-circle fs-5" aria-hidden="true"></i>
                        </button>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="theme-toggle">
                            <label class="form-check-label" for="theme-toggle">Dark Mode</label>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Container -->
        <main class="container my-5">
            <!-- Header -->
            <header class="text-center mb-4">
                <h1>Catalyst</h1>
                <p class="lead">Your Executive Function Assistant. Enter a prompt below.</p>
            </header>
            
            <!-- Prompt Form -->
            <section class="card" role="region" aria-labelledby="prompt-heading">
                <div class="card-body">
                    <h2 id="prompt-heading" class="visually-hidden">Prompt Form</h2>

                    <div class="row g-3 align-items-center mb-3">
                        <div class="col-auto">
                            <label for="tool-selector" class="col-form-label">Select Tool:</label>
                        </div>
                        <div class="col-auto">
                            <select class="form-select" id="tool-selector">
                                <option value="general_assistant" selected>General Assistant</option>
                                <option value="task_breakdown">Task Breakdown</option>
                                <option value="brain_dump_organizer">Brain Dump Organizer</option>
                                <option value="tone_analysis">Tone Analysis</option>
                                <option value="formalizer">Formalizer</option>
                                <option value="meal_muse">Meal Muse</option>
                            </select>
                        </div>
                        
                        <div class="col-auto" id="formalizer-options" style="display: none;">
                            <div class="input-group">
                                <label class="input-group-text" for="formalityLevel">Level:</label>
                                <select class="form-select" id="formalityLevel">
                                    <option value="more formal" selected>More Formal</option>
                                    <option value="more casual">More Casual</option>
                                    <option value="like a pirate">Like a Pirate</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="prompt-input" class="form-label">Your Prompt:</label>
                        <textarea class="form-control" id="prompt-input" rows="4" placeholder="e.g., 'Write an email to my boss asking for a raise'"></textarea>
                    </div>

                    <div>
                        <button id="submit-button" type="button" class="btn btn-primary">
                            <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                            <span class="button-text">Process Text</span>
                        </button>
                        <button id="clear-button" type="button" class="btn btn-outline-secondary ms-2">Clear</button>
                        <button id="stop-button" type="button" class="btn btn-danger ms-2" style="display: none;">Stop Generating</button>
                    </div>
                </div>
            </section>

            <!-- Results Container -->
            <section class="my-4" role="region" aria-labelledby="result-heading">
                <div class="d-flex justify-content-between align-items-center mb-1">
                    <h2 id="result-heading" class="mb-0">Result:</h2>
                </div>
                <div class="position-relative">
                    <div id="result-container" aria-live="polite">Waiting for prompt...</div>
                    <button id="copy-result-button" class="btn btn-sm btn-outline-secondary copy-button" aria-label="Copy result to clipboard" style="display: none;" title="Copy to clipboard">
                        <i class="bi bi-clipboard" aria-hidden="true"></i>
                    </button>
                </div>
            </section>
        </main>

        <!-- Scroll to Bottom Button -->
        <button id="scroll-to-bottom-button" class="btn btn-primary rounded-circle scroll-to-bottom-btn" aria-label="Scroll to bottom" title="Scroll to bottom">
            <i class="bi bi-arrow-down fs-4" aria-hidden="true"></i>
        </button>

        <!-- Footer -->
        <footer class="footer mt-auto py-3 bg-body-tertiary">
            <div class="container text-center">
                <span class="text-muted">&copy; 2025 John Greenfield. Released under the <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank" rel="noopener noreferrer">GPLv3 License</a>.</span>
            </div>
        </footer>

        <!-- Settings Modal -->
        <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title fs-5" id="settingsModalLabel">Settings</h2>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <!-- API Key Input -->
                            <div class="mb-4">
                                <label for="apiKeyInput" class="form-label">Gemini API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="apiKeyInput" aria-describedby="apiKeyHelp" placeholder="Enter your API key">
                                    <button class="btn btn-outline-secondary" type="button" id="toggleApiKeyVisibility" aria-label="Toggle API key visibility">
                                        <i class="bi bi-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div id="apiKeyHelp" class="form-text">Your API key is stored securely in your browser's local storage and is never shared.</div>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" role="switch" id="typingEffectToggle" checked>
                                <label class="form-check-label" for="typingEffectToggle">Enable Typing Effect</label>
                            </div>

                            <!-- Model and Language Selection -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="modelSelector" class="form-label">AI Model</label>
                                    <select class="form-select" id="modelSelector">
                                        <option value="gemini-2.5-flash-lite-preview" selected>Gemini 2.5 Flash Lite Preview (Default)</option>
                                        <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                        <option value="gemini-2.5-pro" disabled>Gemini 2.5 Pro (coming soon)</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="languagePreference" class="form-label">Language Preference</label>
                                    <select class="form-select" id="languagePreference">
                                        <option value="en-GB" selected>British English</option>
                                        <option value="en-US">US English</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="save-settings-button">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title fs-5" id="helpModalLabel">Help & Information</h2>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h3>Welcome to Catalyst!</h3>
                        <p>This application is designed to assist with executive function challenges. Here's a quick guide to the tools:</p>
                        <ul>
                            <li><strong>General Assistant:</strong> Ask any question for a helpful response.</li>
                            <li><strong>Task Breakdown:</strong> Enter a large task to get smaller, manageable steps.</li>
                            <li><strong>Tone Analysis:</strong> Understand the emotional tone of your text.</li>
                            <li><strong>Formalizer:</strong> Rewrite text to be more formal or casual.</li>
                            <li><strong>Meal Muse:</strong> List ingredients to get a recipe suggestion.</li>
                        </ul>

                        <hr class="my-4">

                        <h3 class="mb-3">Keyboard Shortcuts</h3>
                        <p>Use these shortcuts to navigate and use the app more quickly:</p>
                        <ul>
                            <li><kbd>/</kbd> - Focus the prompt input field.</li>
                            <li><kbd>?</kbd> - Open this help window.</li>
                            <li><kbd>Ctrl</kbd> + <kbd>,</kbd> or <kbd>Cmd</kbd> + <kbd>,</kbd> - Open Settings.</li>
                            <li><kbd>Ctrl</kbd> + <kbd>Enter</kbd> or <kbd>Cmd</kbd> + <kbd>Enter</kbd> - Submit the prompt.</li>
                            <li><kbd>Esc</kbd> - Clear the prompt input (when focused).</li>
                        </ul>

                        <hr class="my-4">

                        <h3 class="mb-3">Frequently Asked Questions</h3>
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                        Is my data and API key secure?
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse potenti. Nunc vel elit ut libero consequat aliquam. Integer nec eros nec justo viverra sollicitudin.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h3 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        How does the Task Breakdown feature work?
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="assets/js/app.js"></script>
        <script type="module" src="assets/js/scripts.js"></script>
    </body>
</html>